<?xml version="1.0" encoding="UTF-8"?>
<!--
Created by Divyansh Gupta on 2017.02.21 
Copyright Â© 2017 Divyansh Gupta. All rights reserved.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">

    <ui:composition template="template/siteTemplate.xhtml">

        <ui:define name="title">
            <h:outputText value="My Account"></h:outputText>
        </ui:define>

        <ui:define name="editableContent">
            <!--
                You can place p:growl anywhere on your JSF page since the messages are displayed
                as an overlay. The life attribute defines how long the message will be displayed 
                in milliseconds after which it will fade away. 5000 milliseconds = 5 seconds
                
                All 'FacesMessage resultMsg' will be displayed here.
            -->
            <p:growl id="growl" life="5000" />
            <h:form>
                <p:layout style="min-width:400px;min-height:400px;">
                    <p:layoutUnit position="west" resizable="true" size="100" minSize="40" maxSize="200">
                        <p:selectOneListbox id="basic" value="#{messageManager.locationEngaged}">
                            <c:forEach items="#{messageManager.getMessageLocations()}" var="location">
                                <f:selectItem itemLabel="#{location.locationName}" itemValue="#{location}" />
                            </c:forEach>
                        </p:selectOneListbox>
                    </p:layoutUnit>

                    <p:layoutUnit position="center" style="width: 50%">
                        <div style="text-align: center">
                            <h:form id="MessageViewForm">

                                <div style="overflow-y: scroll" height="500">
                                    <ui:repeat value="#{messageManager.messagesBetweenSelectedLocationAndUser()}" var="message">
                                        <h:outputText value="#{message.description}"></h:outputText>
                                    </ui:repeat>

                                </div>

                                <p:inputText value="#{messageManager.messageBeingTyped}"></p:inputText>
                                <p:commandButton value="Send" action="#{messageManager.sendMessage()}" />
                            </h:form>
                        </div>
                    </p:layoutUnit>
                </p:layout>
            </h:form>
        </ui:define>

    </ui:composition>

</html>
