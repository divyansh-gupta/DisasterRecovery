<?xml version="1.0" encoding="UTF-8"?>
<!--
Created by Jinwoo Yom on 2017.04.11 
Copyright Â© 2017 Jinwoo Yom. All rights reserved.
-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"   
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui">

    <!-- Do not enter tags before the composition line since they are ignored by JSF -->

    <!-- This page is constructed based on the siteTemplate -->
    <ui:composition template="/template/siteTemplate.xhtml">
        <ui:define name="title">
            <!-- Set the page title -->
            <h:outputText value="Request List for #{LocationManager.getLocation()}"></h:outputText>
        </ui:define>

        <!-- Create the content for this page below -->
        <ui:define name="editableContent">

            <div align="center" style="width:97%" bgcolor="#FDF5E6" >
                <p:growl id="growl" life="4000" />
                
                <!-- Error messages will be shown here if any  -->
                <p:messages id="msgs" styleClass="errorMessages" showIcon="false"/>
                <h:outputLabel id="form-error-message" class="errorMessages" value="#{searchedMovieController.statusMessage}"/>

                <h:form id="SearchedMoviesForm">
                    <p:dataGrid id="searchedMovies" value="#{searchedMovieController.searchedMovies}" var="aSearchedMovie"
                                columns="2" layout="grid"
                                rows="6" paginator="true"  
                                rowsPerPageTemplate="6,12,18,24,30,36,42,48,54" 
                                >

                        <f:facet name="header">
                            Request List for Blacksburg
                        </f:facet>

                        <!-- The p:panel defines a data grid cell displaying aSearchedMovie data -->
                        <p:panel  style="text-align:left" > 
                            
                            <h:panelGrid columns="3" style="width:100%" 
                                         columnClasses="columnMoviePoster, columnMiddlePart, columnInfoButton">                                    
                                <p:graphicImage url="http://image.tmdb.org/t/p/w92#{aSearchedMovie.posterFileName}" width="92px" style="float:left" /> 
                      
                                <h:panelGrid style="width:100%; margin-left:10px">
                                    <f:facet name="header">
                                        <h:outputText value="#{aSearchedMovie.title}"/>
                                    </f:facet>             
                                    <br/>
                                    
                                    <!-- Ratings display -->
                                    <h:panelGrid columns="2" style="float:left">
                                        <h:panelGrid columns="2" >
                                            <h:graphicImage name="/images/ratingIcons/imdb.png" width="25px" style="float:left"/>
                                            <h:outputText class="ratingNumber" value="&nbsp;&nbsp;#{aSearchedMovie.imdbRating}&nbsp;&nbsp;" />
                                        </h:panelGrid>
                                        
                                        <h:panelGrid columns="2">
                                            <h:graphicImage name="#{aSearchedMovie.criticsRatingImage}" width="25px" style="float:left"/>
                                            <h:outputText class="ratingNumber" value="&nbsp;&nbsp;#{aSearchedMovie.criticsRating}&nbsp;&nbsp;" />
                                        </h:panelGrid>
                                    </h:panelGrid>
                                    
                                    <!-- Short list of cast members -->
                                    <h:outputText value="#{aSearchedMovie.getCastShort()}" style="float:left"/>
                                    
                                    <!-- MPAA Rating, duration, release date -->
                                    <h:outputText value="#{aSearchedMovie.mpaaRating}, #{aSearchedMovie.runtime}, #{aSearchedMovie.releaseDate}" style="float:left"/>
                                    
                                </h:panelGrid>
                                
                                <!-- 
                                *** INFO button ***
                                The "title" attribute value is shown as a tooltip text when the mouse is moved over the info icon.
                                -->
                                <p:commandLink update=":searchedMovieDetailsForm" style="width:20px;float:right;" 
                                               oncomplete="PF('searchedMovieDetailsDialog').show()" 
                                               title="View Searched Movie Details">
                                    
                                    <!-- Display the Info Icon -->
                                    <i class="fa fa-info-circle fa-2x"></i>
                                    <!-- 
                                    When the Info Icon is clicked on (selected), the searchedMovieController.selected method
                                    is invoked to set the selected current movie object to the aSearchedMovie object. 
                                    -->
                                    <f:setPropertyActionListener target="#{searchedMovieController.selected}" value="#{aSearchedMovie}" />
                                </p:commandLink>     
                                
                            </h:panelGrid>
                            
                        </p:panel>
                    </p:dataGrid>     
                </h:form>
            </div>
           
        </ui:define>
        
    </ui:composition>
    <!-- Do not enter tags after the composition line since they are ignored by JSF -->

</html>
